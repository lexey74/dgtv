# Диагностика сетевой недоступности

## Текущая конфигурация сервера

✅ Сервер работает на порту: **5173**
✅ Слушает на всех интерфейсах: `*:5173`
✅ Файерволл macOS: **отключён**

## Доступные IP адреса

1. `http://10.0.1.29:5173/` (WiFi en0)
2. `http://10.0.1.32:5173/` (WiFi en5)
3. `http://192.168.255.6:5173/` (VPN/tethering)

## Проверка с Android приставки

### 1. Проверьте, что приставка в той же сети

Откройте терминал на приставке (через ADB или встроенное приложение) и выполните:

```bash
ping -c 4 10.0.1.29
```

Если получаете ответ — сеть работает. Если `Network unreachable` — устройства в разных сетях.

### 2. Проверьте доступность порта

```bash
telnet 10.0.1.29 5173
```

или

```bash
curl -I http://10.0.1.29:5173/
```

### 3. Проверьте IP адрес приставки

```bash
ip addr show
```

или

```bash
ifconfig
```

**Важно:** IP адрес приставки должен быть в диапазоне `10.0.1.x`

### 4. Проверьте DNS и браузер

Откройте браузер на приставке и введите:
- `http://10.0.1.29:5173/`

**Не используйте:**
- `https://` (сервер работает по HTTP)
- Доменное имя (используйте IP)
- Порт 5174 (реальный порт: 5173)

## Частые проблемы

### Проблема 1: Приставка в другой сети

**Признак:** ping не работает, timeout

**Решение:** 
- Подключите приставку к той же WiFi сети, что и Mac
- Проверьте, что роутер не изолирует устройства (AP Isolation)

### Проблема 2: Роутер блокирует межсетевой трафик

**Признак:** ping работает, но HTTP не открывается

**Решение:**
1. Зайдите в настройки роутера (обычно `http://10.0.1.1`)
2. Отключите "AP Isolation" или "Client Isolation"
3. Проверьте настройки VLAN

### Проблема 3: Кеш браузера

**Признак:** страница не загружается или показывает старую версию

**Решение:**
- Очистите кеш браузера на приставке
- Откройте в режиме инкогнито
- Попробуйте другой браузер

### Проблема 4: Несколько сетевых интерфейсов на Mac

**Признак:** Mac имеет несколько IP адресов

**Решение:** Попробуйте все доступные IP:
- `http://10.0.1.29:5173/`
- `http://10.0.1.32:5173/`

## Проверка с Mac (для отладки)

### Проверить, что сервер работает:
```bash
curl http://localhost:5173/
```

### Проверить, какие порты слушаются:
```bash
lsof -i TCP:5173 -P -n | grep LISTEN
```

### Проверить сетевые интерфейсы:
```bash
ifconfig | grep -A 1 "inet "
```

### Проверить маршрутизацию:
```bash
netstat -rn | grep default
```

## Альтернативные решения

### Вариант 1: Используйте USB tethering

Подключите приставку к Mac через USB и активируйте USB-модем. Используйте IP из диапазона `192.168.x.x`.

### Вариант 2: Запустите production сборку

```bash
cd /Users/alexpost/Downloads/projects/dgtv
npm run build
npx serve dist -p 5173 -s
```

### Вариант 3: Используйте ngrok для тестирования

```bash
# Установите ngrok
brew install ngrok

# Создайте туннель
ngrok http 5173
```

Это даст вам публичный URL для тестирования.

## Логи для отладки

Если ничего не помогает, соберите следующую информацию:

**На Mac:**
```bash
ifconfig
netstat -rn
lsof -i TCP:5173
```

**На приставке:**
```bash
ip addr
ip route
ping 10.0.1.29
curl -v http://10.0.1.29:5173/
```

Отправьте результаты для дальнейшей диагностики.
